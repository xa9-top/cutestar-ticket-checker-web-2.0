## 星萌检票姬WEB2.0

### 项目概述

本项目基于[星萌检票姬WEB](https://gitee.com/miku_cute/cutestar-ticket-checker-web)制作

**项目目标:**

- 建立一个功能完善的检票系统，实现票务管理、检票、售票、黑名单等功能
- 基于开源项目星萌检票姬WEB，进行二次开发，增加更多实用功能

**技术栈:**

- **前端:** HTML, CSS, JavaScript
- **后端:** PHP = 7.x
- **数据库:** MySQL = 5.x

**功能模块:**

- **票号生成:** 票种创建、导出制票数据
- **售票系统:** 扫码售票
- **检票系统:** 扫码检票
- **后台管理:** 票务管理(手动售票、检票、黑名单等操作)、数据统计

### 系统架构

**简要说明：**

- **系统分为前端和后端两部分:** 前端负责用户交互，后端处理业务逻辑和数据存储
- **数据流程:** 外部数据源 -> CSV转换 -> 目标系统 -> 检票系统
- **检票系统核心功能:** 票务管理、售票、检票、数据统计

### 功能实现细节

- 票务管理:
  - 支持多种票种，目前有普通票、VIP票、夜场票，其余票种大佬们可自行添加
  - 可单独设置每张票的状态
  - 提供售票功能，票号生成可生成唯一的票码
- 检票管理:
  - 支持扫码和手动操作检票两种检票方式。
  - 将入场时间保存到数据库，方便查询和统计
- 黑名单管理:
  - 支持将用户加入黑名单，防止其入场
  - 可在后台管理黑名单列表
- 数据统计:
  - 可以显示各种状态的票的数量

### 注意事项

- **安全性:** 由于作者很懒，安全这方面直接用服务器自带的WAF防着

  本项目也没有任何身份认证措施，直接使用了HTTP基本身份认证（）

  **所以一定要注意防止SQL注入，未授权访问等安全问题**

### 常见问题

1. **问:** 后台管理显示空白？检票或售票没有查到票信息？票号生成报错？

   **答:** 去查查MySQL的用户名，数据库名及密码是否设置正确？`conf.php`中MySQL连接配置是否正确？有没有导入SQL文件？PHP或MySQL的版本是否正确？

2. **问:** 可不可以有多个售票/检票/后台管理窗口?

   **答:** 包可以的，上述所有页面都基于PHP提供的API来进行操作

   

## 星萌检票姬WEB项目 部署指南

### 准备工作

- **服务器环境:**

  - 操作系统: 能运行Nginx/Apache即可，推荐使用宝塔面板
  - Web 服务器: Nginx/Apache
  - 数据库: MySQL 5.x
  - PHP: 7.x

- **项目代码:**

  - 从 Github 克隆项目到服务器。

    ```bash
    git clone https://github.com/xa9-top/
    ```

    

### 部署步骤

各种环境的安装我就不过多赘述了，直接进入正题

1. **创建数据库:**

   - 在 MySQL 中创建一个新的数据库，并为其设置用户名和密码。
   - 将项目根目录下的 SQL 文件导入到新创建的数据库中。

2. **配置 conf.php 文件:**

   - 在项目根目录找到 `conf.php`文件，根据您的数据库配置进行修改：

     ```php
     <?
         $servername = "localhost";  // MySQL服务器
         $port = 3306;  // MySQL端口
         $username = "checker";  // MySQL用户名  
         $password = "";  // MySQL密码
         $dbname = "checker";  // 数据库名
     ?>
     ```

### 注意

- **防范Web安全问题:** 由于作者很懒，安全这方面直接用服务器自带的WAF防着

  本项目也没有任何身份认证措施，直接使用了HTTP基本身份认证（）

  **所以一定要注意防止SQL注入，未授权访问等安全问题**

- **权限设置:** 可以为整个检票系统加一个HTTP基本身份认证

- **PHP 版本:** 确保 PHP 版本是 7.x， MySQL版本是5.x

### 额外建议

- **备份:** 定期备份数据库。

**通过以上步骤，您就可以成功部署星萌检票姬WEB项目了。**

**如果您在部署过程中遇到任何问题，请仔细查看项目的文档或向我寻求帮助(本人QQ 2042499767)。**

**请根据您的具体环境和项目配置进行相应的调整。**

**祝您部署成功！**

**如果您有其他问题，欢迎随时提出。**